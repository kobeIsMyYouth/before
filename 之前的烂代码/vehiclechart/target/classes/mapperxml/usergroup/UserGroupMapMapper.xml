<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="team.hfut.vehiclechart.mapper.usergroup.UserGroupMapMapper">
	<resultMap id="BaseResultMap"
		type="team.hfut.vehiclechart.bean.usergroup.UserGroupMapBean">
		<result column="provice" property="provice" />
		<collection property="childs" column="provice"
			ofType="team.hfut.vehiclechart.bean.base.KeyValBean" javaType="ArrayList"
			resultMap="keyValueMap" />
	</resultMap>

	<resultMap id="keyValueMap" type="team.hfut.vehiclechart.bean.base.KeyValBean">
		<id column="name" property="name" />
		<result column="value" property="value" />
	</resultMap>

	<sql id="Base_Column_List">
		provice,user_type as `name`,user_num as `value`
	</sql>

	<select id="selectUserType" resultType="string" >
		SELECT DISTINCT user_type FROM
		`result_usergroup_usermap`
	</select>

	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="string">
		select
		<include refid="Base_Column_List" />
		from result_usergroup_usermap
		where id = #{id}
	</select>

	<select id="selectList" resultMap="BaseResultMap"
		parameterType="team.hfut.vehiclechart.bean.usergroup.UserGroupMapBean">
		select
		<include refid="Base_Column_List" />
		from result_usergroup_usermap
		<where>
			<if test="id != null   ">
				and id = #{id}
			</if>
			<if test="provice != null and provice != ''  ">
				and provice = #{provice}
			</if>
			<if test="user_type != null and user_type != ''  ">
				and user_type = #{user_type}
			</if>
				and user_num &gt; 0
		</where>
	</select>

	<select id="selectCount" resultType="int"
		parameterType="team.hfut.vehiclechart.bean.usergroup.UserGroupMapBean">
		select count(0)
		from result_usergroup_usermap
		<where>
			<if test="id != null  ">
				and id = #{id}
			</if>
			<if test="provice != null and provice != '' ">
				and provice = #{provice}
			</if>
			<if test="user_type != null and user_type != '' ">
				and user_type = #{user_type}
			</if>
			<if test="user_num != null  ">
				and user_num = #{user_num}
			</if>
		</where>
	</select>
</mapper>
